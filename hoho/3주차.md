## 클라이언트에서 서버로 데이터 전송

### 쿼리 파라미터를 통한 데이터 전송

- GET
- 주로 정렬 필터

### 메시지 바디를 통한 데이터 전송

- POST, PUT, PATCH
- 회원 가입, 상품 주문, 리소스 등록, 리소스 변경

### 예시 상황

- **정적 데이터 조회**
    - 쿼리 파라미터 없이 리소스 경로로 단순하게 url을 통해 이미지, 텍스트를 얻는 경우
    - 조회는 GET 사용
- **동적 데이터 조회**
    - 쿼리 파라미터를 기반으로 정렬 필터해서 결과를 동적으로 생성
    - /search?q=hello&hl=ko
    - 조회 조건을 줄여주는 필터, 조회 결과를 정렬하는 정렬 조건에 사용
- **HTML Form을 통한 데이터 전송**
    - 순수 html from 태그로 전송되는 데이터
    - <input type=”text” name=”**username**” />
    - <input type=”text” name=”**age**” />
        
        ```
        Content-Type: **application/x-www-form-urlencoded**
        
        **username=kim&age=20**
        ```
        
    - html에서 get요청을 보내면 쿼리 파라미터로 전송됨
        - 리소스를 변경하는 곳에서 get을 보내지말자
    - multipart/form-data
        
        파일 업로드 같은 바이너리 데이터 전송시 사용
        
        다른 종류의 여러 파일과 폼의 내용 함께 전송 가능
        
        ![스크린샷 2022-05-15 오후 10.03.47.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/04051537-b484-428b-9d5b-4a9afde1f2ed/스크린샷_2022-05-15_오후_10.03.47.png)
        
- **HTTP API 데이터 전송**
    
    ![스크린샷 2022-05-15 오후 10.09.11.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4cb25122-416a-456d-9316-61f9083b3cc8/스크린샷_2022-05-15_오후_10.09.11.png)
    
    - 서버 to 서버
    - 앱 클라이언트
    - 웹 클라이언트
        - AJAX, React, VueJs
    - POST, PUT, PATCH
    - GET
    - application/json을 주로 사용
        - TEXT, XML, JSON
    
    ### 질문
    
    content-type을 어떻게 구분할까?
    

## HTTP API 설계 예시

### HTTP API - 컬렉션

- POST 기반 등록
    - 회원 목록 **GET** /members
    - 회원 등록 **POST** /members
        - 리소스 URI를 만들어서 Location안에 넣어준다.
        - 바디에 담아서 보내기도 함
    - 회원 조회 **GET** /members
    - 회원 수정 **PATCH**, **PUT**, **POST** /members
    - 회원 삭제 **DELETE** /members
    
    - **클라이언트는 등록될 리소스의 URI를 모른다.**
    - 서버가 새로 등록된 리소스 URI를 생성해준다.
    - 컬렉션
        - 서버가 관리하는 리소스 디렉토리
        - 서버가 리소스의 URI를 생성하고 관리

### HTTP API - 스토어

- PUT 기반 등록
    - 파일 목록 **GET** /files
    - 파일 조회 **GET** /files/{filename}
    - 파일 등록 **PUT** /files/{filename}
    - 파일 삭제 **DELETE** /files/{filename}
    - 파일 대량 등록 **POST** /files
    
    - PUT 기반 특징
    - **클라이언트가 리소스 URI를 알고있어야 한다.**
    - 스토어
        - 클라이언트가 관리하는 리소스 저장소
    

### HTML FORM 사용

- 웹 페이지 회원 관리
- GET, POST 지원
- HTML FORM 사용
    - 회원 목록 **GET** /members
    - 회원 등록 폼 **GET** /members/new
    - 회원 등록 **POST** /members/new, /members
    - 회원 조회 **GET** /members/{id}
    - 회원 수정 폼 **GET** /members/{id}/edit
    - 회원 수정 **POST** /members/{id}/edit, /members/{id}
    - 회원 삭제 **POST** /members/{id}/delete
    
    - HTML FORM은 GET, POST만 지원
    - 컨트롤 URI
        - GET, POST만 지원하므로 제약이 있다
        - 제약을 해결하기 위해 동사 사용

[REST Resource Naming Guide](https://restfulapi.net/resource-naming/)

# ****

**문서(document)**

단일 개념(파일 하나, 객체 인스턴스, 데이터베이스 row)

예) /members/100, /files/star.jpg

**컬렉션(collection)**

서버가 관리하는 리소스 디렉터리
서버가 리소스의 URI를 생성하고 관리
예) /members

**스토어(store)**

클라이언트가 관리하는 자원 저장소
클라이언트가 리소스의 URI를 알고 관리
예) /files

**컨트롤러(controller), 컨트롤 URI**

문서, 컬렉션, 스토어로 해결하기 어려운 추가 프로세스 실행
동사를 직접 사용
예) /members/{id}/delete

## HTTP 상태 코드

클라이언트가 보낸 요청의 처리 상태를 응답에서 알려주는 기능

- **1xx Information** : 요청이 수신되어 처리중
- **2xx** **Successful** : 요청 정상 처리
- **3xx** **Redirection** : 요청을 완료하려면 추가 행동이 필요
- **4xx**  **Client Error** : 클라이언트 오류, 잘못된 문법등으로 서버가 요청을 수행할 수 없음
- **5xx** **Server Error** : 서버 오류, 서버가 정상 요청을 처리하지 못함
