## [노션으로 보기](https://aeno.notion.site/http-791785e0280f4473ad078041bd7bb910)


# http 웹 기본 지식

## 인터넷 통신

클라이언트에서 서버까지 메세지를 보낼때 인터넷망의 노드를 통해서 전달된다. 여러 길이 존재 (해저 광케이블, 인공위성)

여기서 노드는 IP주소를 보유한 어떤것도 노드라고 부를 수 있다.

어떤 규칙으로 어떻게 넘어 갈까? → IP(인터넷 프로토콜)에 대해 이해해야한다.

---

### IP의 역할

지정한 IP 주소에 데이터 전달

패킷이라는 통신 단위로 전달

IP 패킷은 규칙이 있다. 출발지 IP, 목적지 IP, 기타...

노드간 패킷을 통해 데이터를 전달해서 도착지 IP까지 패킷을 전송한다.

### IP의 한계

- 비연결성
    - 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷 전송이 된다.
    - 대상 서버가 패킷을 받을 수 있는 상태인지 알 수가 없다.
- 비신뢰성
    - 중간에 패킷이 사라지거나 반드시 순서대로 오지 않는다.
- 프로그램 구분
    - 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상인 경우 어떻게 구분하는가?

- 이런 문제를 해결해주는 것이 TCP, UDP

### 궁금한 점

- 어떻게 패킷을 다른 노드로 보낼 수 있는건지?
- 패킷이 뭔지?
    - 패키지와 버킷의 합성어
- 패킷에 담기는 용량의 제한은 몇인지?
    - [https://popcorntree.tistory.com/108](https://popcorntree.tistory.com/108)

---

### TCP, UDP

인터넷 프로토콜 4계층


1. “Hello World”라는 메세지를 전달하려면 소켓 라이브러리를 통해 OS 계층에다가 메시지를 넘긴다.
2. OS 계층에서 TCP가 “Hello World” 메시지에 TCP를 감싼다.
3. 그 감싼 메시지에 IP정보를 감싼다.

- IP 패킷에는 출발지 IP, 목적지 IP 가 있다.
- TCP세그먼트에는 출발지 port, 목적지 port, 전송 제어, 순서, 검증 정보

### TCP 특징

전송 제어 프로토콜 (어떻게 전송을 할지 제어하는 프로토콜)

- 연결 지향 → 연결이 됐나 안됐나 확인을 하고 메세지를 보낸다.
    - TCP 3 way handshake
    
      물리적으로 연결이 된 것이아니라 논리적으로 연결이 된것이다. 통신을 주고받았으니 연결됐다 생각하는 것

- 데이터 전달 보증 → 패킷이 중간에 누락되어도 확인할 수 있다.
    - 데이터를 전송하면 서버에서 데이터를 잘 받았다고 응답을 하기때문에 문제를 인지할 수 있다.
- 순서 보장
    - 패킷의 순서가 잘 못 보내져도 올바른 순서대로 보내라고 함

### UDP 특징

- 기능이 거의 없음
- 연결지향 X
- 데이터 전달 보증 X
- 순서 보장X
- 단순하고 빠름
- IP와 거의 같다. PORT + 체크섬 정도 추가
- 어플리케이션에서 추가작업이 필요하다.
- 근데 왜쓰냐?
    - TCP는 시간이 좀 걸린다.
    - TCP는 이미 구현이 되어있어서 변경이 불가능에 가깝다
    - UDP는 도화지와 같아서 좀더 커스텀하게 사용할 수 있다.
        - 아마 구글에서 http3로 개발한걸로 알고있다.
    - 다시 UDP가 뜨고 있다.

### 궁금한점

이더넷 프레임을 간단하게라도 알아보자

syn, ack는 무엇인가

순서가 잘 못 보내졌을 때 뒤에 받은 것은 버려지는가?

---

### PORT

한번에 둘 이상 연결해야된다면? (같은 IP에 다른 요청들을 보내야하는 사황)

게임을 위한 패킷인지 화상통화의 패킷인지 알 수가 없다.

패킷 정보에 포트를 포함해야한다!

패킷에서 출발지 포트와 도착지 포트를 보낸다.

→ 그래서 도커 사용한 미션때 3306:3307 적어준게 이건가???

도커 포트는 3306, 내 서버는 3307??

0 ~ 65535까지 할당 가능

0 ~ 1023까지는 잘 알려진 포트고 사용하지 않는 것이 좋다.

- FTP - 20, 21
- TELNET - 23
- HTTP - 80
- HTTPS - 443

### 궁금한점

왜 65535까지 인가? 숫자에 어떤 의미가 있는 것일까?

- [16진수](https://xe.rigvedawiki.net/w/16%EC%A7%84%EC%88%98)
  의 네 자리 최고 숫자인 0x[FF](https://xe.rigvedawiki.net/w/FF)
  FF를 10진법으로 표기하면 65535가 된다. 즉 2의 16제곱 - 1

포트를 찾아가는 방식도 궁금하다.

---

### DNS

IP는 계속 변경된다.

도메인명을 IP로 변경해준다.

DNS 서버에서 도메인을 등록할 수 있다.

### URI

URI : 가장 상위 개념, locator, name 또는 둘다 추가로 분류될 수 있다.

- Uniform : 리소스를 식별하는 통일된 방식
- Resource : URI로 표현하는 모든 것
- Identifier : 식별하기 위한 정보

URL(locator) : 리소스가 있는 위치를 지정

URN(name) : 리소스에 이름으 ㄹ부여

URL 문법

[https://www.google.com:443/search?q=hello&hl=ko](https://www.google.com:443/search?q=hello&hl=ko)

- https : 프로토콜
- [www.google.com](http://www.google.com) : 호스트명
- 443 : 포트번호 (일반적으로 생략)
- /search : 패스
- q=hello&hl=ko : 쿼리 파라미터
    - key, value 형태
    - ?로 시작, &으로 추가 가능 ex) ?keyA=valueA&keyB=valueB
    - 쿼리 파라미터, 쿼리 스트링으로 불린다. 웹 서버에서 제공하는 파라미터

### 요청 흐름

http 요청 메시지 전송

2번에서 3way handshake를 진행

패킷에는 전송 데이터까지 추가된다. (http 메세지)

---

### 공유하고 싶은 내용

1. 포트번혹 왜 65535까지 있는지?
- 포트 번호는 16bit로 이루어져 65536개의 포트번호가 존재
1. TCP 세그먼트의 최대 패킷 크기는?
- 이론상 65536바이트지만 헤더와 IP헤더 크기도 빼야한다.
- 네트워크 상의 PDU의 크기 중 가장 큰 크기를 MTU(Maximum Transmission Unit)이라고 한다.
- [.com/entry/패킷분해-1-한-패킷의-크기MTU는-얼마나-될까](https://hackthepacket.tistory.com/entry/%ED%8C%A8%ED%82%B7%EB%B6%84%ED%95%B4-1-%ED%95%9C-%ED%8C%A8%ED%82%B7%EC%9D%98-%ED%81%AC%EA%B8%B0MTU%EB%8A%94-%EC%96%BC%EB%A7%88%EB%82%98-%EB%90%A0%EA%B9%8C)
